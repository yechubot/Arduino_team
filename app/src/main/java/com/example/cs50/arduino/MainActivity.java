package com.example.cs50.arduino;import android.app.Notification;import android.content.ContentResolver;import android.content.Intent;import android.graphics.Color;import android.net.Uri;import android.os.Bundle;import android.view.View;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import androidx.core.app.NotificationCompat;import androidx.core.app.NotificationManagerCompat;import com.pedro.library.AutoPermissions;import com.pedro.library.AutoPermissionsListener;import java.text.SimpleDateFormat;import java.util.Calendar;public class MainActivity extends AppCompatActivity implements AutoPermissionsListener {    //ui    LinearLayout weather, stroll, window;    String date_time;    TextView today_date_time;    TextView today_weather;    TextView today_suggest;    //화재감지전화테스트    TextView fire_status;    //화재감지notification    ImageView iv_fire;    NotificationManagerCompat notificationManager;    Uri alarmSound = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://" + BuildConfig.APPLICATION_ID + "/" + R.raw.siren);    final long[] VIBRATE_PATTERN = {500, 1000, 300, 1000, 500, 1000, 300, 1000};    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        AutoPermissions.Companion.loadAllPermissions(this, 101); //모든 퍼미션 다 체크해줌.        Calendar calendar = Calendar.getInstance();        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy년 MM월 dd일");        date_time = simpleDateFormat.format(calendar.getTime());        //원 3개        weather = findViewById(R.id.weather);        stroll = findViewById(R.id.stroll);        window = findViewById(R.id.window);        //날씨 원 text        today_date_time = findViewById(R.id.today_date_time);        today_weather = findViewById(R.id.today_weather);        today_suggest = findViewById(R.id.today_suggest);        //현재 날짜        today_date_time.setText(date_time);        weather.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent(getApplicationContext(), WeatherActivity.class);                startActivity(intent);            }        });        stroll.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent(getApplicationContext(), StrollActivity.class);                startActivity(intent);            }        });        window.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent(getApplicationContext(), WindowActivity.class);                startActivity(intent);            }        });        //화재감지전화테스트        fire_status = (TextView) findViewById(R.id.fire_status);        // 오류나서 주석처리해놓음//        fire_status.setOnClickListener(new View.OnClickListener() {//            @Override//            public void onClick(View view) {//                Intent intent=new Intent(getApplicationContext(),FireNotification.class);//                startActivity(intent);//            }//        });        //화재감지notification        iv_fire = (ImageView) findViewById(R.id.iv_fire);        notificationManager = NotificationManagerCompat.from(this);        iv_fire.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                sendOnChannel1(v);            }        });    }    public void sendOnChannel1(View v) {        Notification notification = new NotificationCompat.Builder(this, NotiChannel.CHANNEL_1_ID)                .setSmallIcon(R.drawable.ic_fire)                .setTicker("화재감지경보")                .setContentTitle("화재감지경보")                .setContentText("화재가 감지되어 자동으로 창문열기 실행됨")                .setPriority(NotificationCompat.PRIORITY_HIGH)                .setColor(Color.RED)                .setSound(alarmSound)                .setVibrate(VIBRATE_PATTERN)                .setAutoCancel(true)                .build();        notificationManager.notify(1, notification);    }    public void sendOnChannel2(View v) {    }    @Override    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {        super.onRequestPermissionsResult(requestCode, permissions, grantResults);        AutoPermissions.Companion.parsePermissions(this, requestCode, permissions, this);    }    @Override    public void onDenied(int i, String[] strings) {    }    @Override    public void onGranted(int i, String[] strings) {    }}